SET(LIBVERSION_SOURCES
	compare.c
	signature.c
)

SET(LIBVERSION_HEADERS
	version.h
)

ADD_LIBRARY(version SHARED ${LIBVERSION_SOURCES} ${LIBVERSION_HEADERS})
SET_TARGET_PROPERTIES(version PROPERTIES
	SOVERSION 0
	VERSION 0.0.0
)

ADD_LIBRARY(version_static STATIC ${LIBVERSION_SOURCES} ${LIBVERSION_HEADERS})
SET_TARGET_PROPERTIES(version_static PROPERTIES
	POSITION_INDEPENDENT_CODE ON
	OUTPUT_NAME version
)

CONFIGURE_FILE(libversion.pc.in libversion.pc @ONLY)

INSTALL(FILES ${LIBVERSION_HEADERS} DESTINATION include/libversion)
INSTALL(TARGETS version version_static LIBRARY DESTINATION lib ARCHIVE DESTINATION lib)

INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/libversion.pc DESTINATION ${PKGCONFIGDIR})
